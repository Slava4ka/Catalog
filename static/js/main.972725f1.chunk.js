(this.webpackJsonpcatalog=this.webpackJsonpcatalog||[]).push([[0],{24:function(e,t,a){e.exports={productCard:"ProductCard_productCard__3HKJ8",container:"ProductCard_container__16Wal",container__img:"ProductCard_container__img__2w0HF",container__name:"ProductCard_container__name__7WAhW",container__price:"ProductCard_container__price__1QphM",container__button:"ProductCard_container__button__39KM0"}},29:function(e,t,a){e.exports={col_margin:"commonStyle_col_margin__28xKH",title_margin:"commonStyle_title_margin__2hvRu"}},44:function(e,t,a){e.exports={header:"Header_header__tPodg",badge:"Header_badge__kPcPJ",navbarCollapse:"Header_navbarCollapse__384NQ"}},55:function(e,t,a){e.exports={messageBox:"MessageBox_messageBox__3aVdY",messageBox_none:"MessageBox_messageBox_none__2SzU0"}},63:function(e,t,a){e.exports={position:"MySpinner_position__2hG0e"}},72:function(e,t,a){e.exports=a(89)},77:function(e,t,a){},89:function(e,t,a){"use strict";a.r(t);var n,r=a(1),c=a.n(r),o=a(10),i=a.n(o),s=(a(77),a(11)),l=a(58),u=a(8);!function(e){e.FETCH_PRODUCTS="@@catalog/FETCH_PRODUCTS",e.FETCH_ERROR="@@catalog/FETCH_ERROR",e.TOGGLE_IS_FETCHING="@@catalog/TOGGLE_IS_FETCHING",e.ADD_MESSAGE="@@message/ADD_MESSAGE",e.SET_VISIBILITY="@@message/SET_VISIBILITY",e.ADD_ITEM="@@cart/ADD_ITEM",e.REMOVE_ONE_ITEM="@@cart/REMOVE_ONE_ITEM",e.DROP_ITEM="@@cart/DROP_ITEM",e.COUNT_TOTAL_PRICE="@@cart/COUNT_TOTAL_PRICE",e.DROP_CART="@@cart/DROP_CART"}(n||(n={}));var m={isFetching:!1,productsList:[],errors:""},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.FETCH_PRODUCTS:return Object(u.a)({},e,{productsList:t.payload});case n.TOGGLE_IS_FETCHING:return Object(u.a)({},e,{isFetching:!e.isFetching});case n.FETCH_ERROR:return Object(u.a)({},e,{errors:t.payload});default:return e}},d=a(32),E={message:[]},p=function(e,t){return[].concat(Object(d.a)(e),[{id:e.length,text:t.text,time:t.time,isVisible:!0}])},g=function(e,t){return e.filter((function(e){return e.id!==t}))},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.ADD_MESSAGE:return Object(u.a)({},e,{message:p(e.message,t.payload)});case n.SET_VISIBILITY:return Object(u.a)({},e,{message:g(e.message,t.payload)});default:return e}},C={productsCounter:0,products:[],totalPrice:0,errors:""},v=function(e,t,a){if("undefined"===typeof e.find((function(e){return e.product.id===t}))){var n=a.find((function(e){return e.id===t}));return"undefined"===typeof n?Object(d.a)(e):[].concat(Object(d.a)(e),[{product:n,quantity:1}])}return e.map((function(e){return e.product.id===t?Object(u.a)({},e,{quantity:e.quantity+1}):e}))},O=function(e,t){return e.map((function(e){return e.product.id===t?Object(u.a)({},e,{quantity:e.quantity-1}):e})).filter((function(e){return e.quantity>0}))},b=function(e,t){return e.filter((function(e){return e.product.id!==t}))},h=function(e){return console.log(e),e.length?e.map((function(e){return e.product.price*e.quantity})).reduce((function(e,t){return e+t})):0},T=function(e,t,a){var n=a.find((function(e){return e.product.id===t}));return"undefined"===typeof n?e:e-n.quantity},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.ADD_ITEM:return Object(u.a)({},e,{productsCounter:e.productsCounter+1,products:v(e.products,t.payload.id,t.payload.catalog)});case n.REMOVE_ONE_ITEM:return Object(u.a)({},e,{productsCounter:e.productsCounter-1,products:O(e.products,t.payload)});case n.DROP_ITEM:return Object(u.a)({},e,{productsCounter:T(e.productsCounter,t.payload,e.products),products:b(e.products,t.payload)});case n.COUNT_TOTAL_PRICE:return Object(u.a)({},e,{totalPrice:h(e.products)});case n.DROP_CART:return C;default:return e}},S=a(59),N=a.n(S),I=a(56),R={key:"cartStore",storage:N.a},j=Object(s.c)({catalog:_,messages:f,cartPersist:Object(I.a)(R,y)}),P=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,x=Object(s.e)(j,P(Object(s.a)(l.a))),D=Object(I.b)(x),M=x,A=a(21),w=a(48),L=a(16),F=a(27),k=a.n(F),B=a(12);function H(){var e;return k.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("in"),t.next=3,k.a.awrap(fetch("https://appevent.ru/dev/task1/catalog",{method:"get",headers:{Accept:"application/json"}}));case 3:return e=t.sent,t.abrupt("return",e.json());case 5:case"end":return t.stop()}}))}var G=function(){return Object(B.action)(n.TOGGLE_IS_FETCHING)},q=a(92),V=a(93),U=a(94),Y=a(29),W=a.n(Y),z=a(71),J=a(24),Q=a.n(J),K=a(91),Z=a(26),X=function(e){var t=e.id,a=e.price,n=e.name,o=e.image,i=e.sendMessage,s=e.addToCart,l=Object(A.e)(),u=Object(r.useState)(!1),m=Object(z.a)(u,2),_=m[0],d=m[1];return c.a.createElement("div",{className:Q.a.productCard},c.a.createElement("div",{className:Q.a.container},c.a.createElement("div",{className:Q.a.container__img},c.a.createElement("img",{src:o.toString(),alt:n})),c.a.createElement("div",{className:Q.a.container__name},n),c.a.createElement("div",{className:Q.a.container__price},a.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")," ",c.a.createElement(Z.a,null)),c.a.createElement("div",{className:Q.a.container__button},c.a.createElement(K.a,{variant:"dark",size:"lg",block:!0,onClick:function(){_?l.push("/cart"):(s(t),i("".concat(n," \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")),d(!0))}},_?"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"))))},$=a(63),ee=a.n($),te=a(64),ae=function(){return c.a.createElement(te.a,{className:ee.a.position,animation:"border"})},ne=function(){return Object(B.action)(n.COUNT_TOTAL_PRICE)},re=function(e){return function(t){t(function(e,t){return Object(B.action)(n.ADD_ITEM,{id:e,catalog:t})}(e,M.getState().catalog.productsList)),t(ne())}},ce={getProducts:function(){return function(e){var t;return k.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e(G()),a.prev=1,a.next=4,k.a.awrap(H());case 4:t=a.sent,e((c=t.items,Object(B.action)(n.FETCH_PRODUCTS,c))),a.next=12;break;case 8:throw a.prev=8,a.t0=a.catch(1),r="\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",Object(B.action)(n.FETCH_ERROR,r),a.t0;case 12:e(G());case 13:case"end":return a.stop()}var r,c}),null,null,[[1,8]])}},showMessage:function(e){return t=e,a=5e3,Object(B.action)(n.ADD_MESSAGE,{text:t,time:a});var t,a},addToCart:re},oe=Object(L.b)((function(e){var t=e.catalog;return{isFetching:t.isFetching,productsList:t.productsList}}),ce)((function(e){var t=e.isFetching,a=e.productsList,n=e.getProducts,o=e.showMessage,i=e.addToCart;return Object(r.useEffect)((function(){n()}),[]),t?c.a.createElement(ae,null):c.a.createElement(q.a,null,c.a.createElement("h1",{className:W.a.title_margin},"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"),c.a.createElement(V.a,null,a.map((function(e){return c.a.createElement(U.a,{md:4,sm:6,xs:12,key:e.id.toString()+e.image.toString(),className:W.a.col_margin},c.a.createElement(X,{id:e.id,image:e.image,name:e.name,price:e.price,sendMessage:o,addToCart:i}))}))))})),ie=a(44),se=a.n(ie),le=a(99),ue=a(98),me=a(95),_e=Object(L.b)((function(e){return{productsCounter:e.cartPersist.productsCounter}}),{})((function(e){return c.a.createElement(le.a,{className:se.a.header,collapseOnSelect:!0,expand:"sm",bg:"light ",variant:"light"},c.a.createElement(le.a.Brand,{href:"#home"},"Catalog-App"),c.a.createElement(le.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),c.a.createElement(le.a.Collapse,{className:se.a.navbarCollapse,id:"responsive-navbar-nav"},c.a.createElement(ue.a,null,c.a.createElement(ue.a.Link,{href:"#catalog"},"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"),c.a.createElement(ue.a.Link,{href:"#cart"},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430",c.a.createElement(me.a,{className:se.a.badge,variant:"dark"},e.productsCounter)))))})),de=a(9),Ee=a.n(de),pe=a(100),ge=a(96),fe=a(52),Ce=a(69),ve=function(e){var t=e.item,a=t.product,n=t.quantity,r=e.addToCart,o=e.removeFromCart,i=e.dropFromCart;return c.a.createElement(V.a,{className:Ee.a.item},c.a.createElement(U.a,{md:2,sm:12,xs:12},c.a.createElement("div",{className:Ee.a.item__image},c.a.createElement("img",{src:a.image.toString(),alt:"image of ".concat(a.name)}))),c.a.createElement(U.a,{md:4,sm:12,xs:12},c.a.createElement("div",{className:Ee.a.item__name},a.name)),c.a.createElement(U.a,{md:3,sm:12,xs:12},c.a.createElement("div",{className:Ee.a.quantity_control},c.a.createElement(K.a,{variant:"outline-dark",onClick:function(){return o(a.id)}},c.a.createElement(fe.a,null)),c.a.createElement("div",{className:Ee.a.quantity_control__value},n),c.a.createElement(K.a,{variant:"outline-dark",onClick:function(){return r(a.id)}},c.a.createElement(fe.b,null)))),c.a.createElement(U.a,{md:2,sm:6,xs:6},c.a.createElement("div",{className:Ee.a.item__price},a.price.toString().replace(/\B(?=(\d{3})+(?!\d))/g," "),c.a.createElement(Z.a,null))),c.a.createElement(U.a,{md:1,sm:6,xs:6},c.a.createElement("div",{className:Ee.a.item__trash},c.a.createElement(pe.a,{key:"bottom",placement:"bottom",overlay:c.a.createElement(ge.a,{id:"tooltip-bottom"},c.a.createElement("strong",null,"\u0423\u0431\u0440\u0430\u0442\u044c"))},c.a.createElement(Ce.a,{onClick:function(){return i(a.id)},size:"1.6rem"})))))},Oe={addToCart:re,removeFromCart:function(e){return function(t){t(function(e){return Object(B.action)(n.REMOVE_ONE_ITEM,e)}(e)),t(ne())}},dropFromCart:function(e){return function(t){t(function(e){return Object(B.action)(n.DROP_ITEM,e)}(e)),t(ne())}},dropCart:function(){return Object(B.action)(n.DROP_CART)}},be=Object(L.b)((function(e){var t=e.cartPersist;return{products:t.products,totalPrice:t.totalPrice}}),Oe)((function(e){var t=e.products,a=e.totalPrice,n=e.addToCart,r=e.removeFromCart,o=e.dropFromCart,i=e.dropCart;return c.a.createElement("div",null,c.a.createElement(q.a,null,c.a.createElement("h1",{className:W.a.title_margin},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"),c.a.createElement("div",{className:Ee.a.itemsList_margin},t.length>0?c.a.createElement("div",null,t.map((function(e,t){return c.a.createElement(ve,{key:t,item:e,addToCart:n,removeFromCart:r,dropFromCart:o})})),c.a.createElement(V.a,{className:Ee.a.bottomRow_margin},c.a.createElement(U.a,{md:6,sm:12},c.a.createElement("div",{className:Ee.a.send},c.a.createElement(K.a,{variant:"dark",size:"lg",onClick:i},"\u041e\u0442\u043f\u0440\u0430\u0432\u0442\u044c \u0437\u0430\u043a\u0430\u0437"))),c.a.createElement(U.a,{md:6},c.a.createElement("div",{className:Ee.a.totalPrice},"\u0418\u0442\u043e\u0433\u043e ".concat(a.toString().replace(/\B(?=(\d{3})+(?!\d))/g," ")),c.a.createElement(Z.a,null))))):c.a.createElement("h1",{className:Ee.a.emptyCart},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"))))})),he=a(55),Te=a.n(he),ye=a(97),Se=function(e){var t=e.id,a=e.text,n=e.showA,r=e.toggleShowA,o=new Date;return c.a.createElement(ye.a,{show:n,onClose:function(){return r(t)},delay:1500,autohide:!0},c.a.createElement(ye.a.Header,null,c.a.createElement("strong",{className:"mr-auto"},"CatalogApp"),c.a.createElement("small",null,"".concat(o.getHours(),":").concat(o.getMinutes()," ").concat(o.toLocaleDateString()))),c.a.createElement(ye.a.Body,null,a))},Ne={hideMessage:function(e){return t=e,Object(B.action)(n.SET_VISIBILITY,t);var t}},Ie=Object(L.b)((function(e){return{message:e.messages.message}}),Ne)((function(e){var t=e.message,a=e.hideMessage;return c.a.createElement("div",{className:"".concat(Te.a.messageBox," ").concat(t.length?"":Te.a.messageBox_none)},t.map((function(e,t){return c.a.createElement(Se,{key:"".concat(e.id).concat((new Date).toLocaleString(),"__").concat(t),id:e.id,text:e.text,showA:e.isVisible,toggleShowA:a})})))})),Re=a(70),je=Object(s.d)(A.f)((function(){return c.a.createElement("div",{className:"App"},c.a.createElement(_e,null),c.a.createElement(Ie,null),c.a.createElement(A.a,{path:"/catalog",render:function(){return c.a.createElement(oe,null)}}),c.a.createElement(A.a,{path:"/cart",render:function(){return c.a.createElement(be,null)}}))})),Pe=function(e){var t=e.store;return c.a.createElement(w.a,null,c.a.createElement(L.a,{store:t},c.a.createElement(Re.a,{loading:c.a.createElement(ae,null),persistor:D},c.a.createElement(je,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(Pe,{store:M}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},9:function(e,t,a){e.exports={item:"Cart_item__beAxc",totalPrice:"Cart_totalPrice__2UUEb",itemsList_margin:"Cart_itemsList_margin__2xL-Z",emptyCart:"Cart_emptyCart__AqdQa",item__image:"Cart_item__image__13IDg",item__name:"Cart_item__name__3bARx",quantity_control:"Cart_quantity_control__3VYVN",quantity_control__value:"Cart_quantity_control__value__25sSZ",item__price:"Cart_item__price__1t7tZ",item__trash:"Cart_item__trash__L14Br",bottomRow_margin:"Cart_bottomRow_margin__1DrQ1",send:"Cart_send__1alMD"}}},[[72,1,2]]]);
//# sourceMappingURL=main.972725f1.chunk.js.map